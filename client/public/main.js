!function(e){function t(t){for(var a,c,i=t[0],l=t[1],u=t[2],d=0,m=[];d<i.length;d++)c=i[d],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&m.push(r[c][0]),r[c]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(s&&s(t);m.length;)m.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,i=1;i<n.length;i++){var l=n[i];0!==r[l]&&(a=!1)}a&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},r={0:0},o=[];function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var s=l;o.push([76,1]),n()}({126:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),c=n(24),i=(n(81),n(2)),l=n(5),u=function(e,t,n){return{type:"ADD_TODO",id:n,payload:{text:e,timeCreate:t}}},s=function(){return{type:"HIDE_ALERT"}},d=function(e,t){return{type:"SHOW_ALERT",payload:{type:e,text:t}}},m=function(e,t,n){return function(a){a(d(e,t)),setTimeout((function(){a(s())}),n)}},f=d,p=n(8),g=n.n(p),E=function(){return{type:"HIDE_LOADER"}},b=function(){return{type:"SHOW_LOADER"}},O=function(){return localStorage.removeItem("userData"),{type:"LOGOUT"}},v=function(e,t){return function(n){n(b()),g.a.post("/api/auth/login",{email:e,password:t}).then((function(e){var t=e.data;localStorage.setItem("userData",JSON.stringify(t)),n({type:"LOGIN"}),n(E())}),(function(e){n(E()),n(m("ERROR",e.response.data.message,2500))}))}},h=function(){return{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("userData")).token}}},y=function(){var e=Object(l.c)(),t=Object(a.useState)(""),n=t[0],o=t[1];return r.a.createElement("form",{className:"form add-todo"},r.a.createElement("div",{className:"input-wrapper"},r.a.createElement("input",{className:"form-control form-control-lg",type:"text",placeholder:"Введите название заметки",value:n,onChange:function(e){return o(e.target.value)}})),r.a.createElement("div",{className:"btn-wrapper"},r.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:function(t){return function(t){t.preventDefault();var a=h(),r={text:n};g.a.post("/api/todo/create",r,a).then((function(t){var n=t.data.todo,a=n._id,r=n.text,o=n.date;e(u(r,o,a)),e(m("SUCCESS","Заметка создана",2500))}),(function(t){e(m("WARNING",t.response.data.message,2500))})),o("")}(t)}},"Создать")))},N=(n(49),n(18),n.p+"img/trash-solid.svg"),j=function(e){var t=Object(a.useRef)(null);Object(a.useEffect)((function(){e.checked&&t.current.classList.add("checked")}));return r.a.createElement("li",{className:"todo list-group-item"},r.a.createElement("div",{ref:t,className:"todo-main",onClick:function(t){return function(t){e.onToggleTodo(e._id),t.currentTarget.classList.toggle("checked")}(t)}},r.a.createElement("input",{type:"checkbox",className:"todo-checkbox",checked:e.checked,onChange:function(){}}),r.a.createElement("p",{className:"text"},e.text),r.a.createElement("div",{className:"todo-create-date"},r.a.createElement("p",null,e.date))),r.a.createElement("a",{className:"link-close",href:"#",onClick:function(){e.onDeleteClick(e._id)}},r.a.createElement("img",{className:"link-img-close",src:N})))},S=n(128),L=n(127),T=function(){return r.a.createElement("div",{className:"spinner-border",style:{width:"3rem",height:"3rem",margin:"auto"},role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))};function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var D=function(e){Object(a.useEffect)((function(){e.loadTodoList()}),[]);var t=r.a.createElement(S.a,{component:"ul",className:"list-group"},e.todos.map((function(t){return r.a.createElement(L.a,{key:t._id,classNames:"todo",timeout:800},r.a.createElement(j,_({},t,{onDeleteClick:e.deleteTodo,onToggleTodo:e.toggleTodo})))})));return r.a.createElement(r.a.Fragment,null,e.isLoading?r.a.createElement("div",{className:"loader"},r.a.createElement(T,null)):t)},R=function(e){return{type:"DELETE_TODO",payload:{id:e}}},w=function(e){return{type:"TOGGLE_TODO",payload:{id:e}}},C=function(){return function(e){var t=h();e(b()),g.a.get("/api/todo",t).then((function(t){e({type:"LOAD_TODO_LIST",payload:{todoList:t.data.todoList}}),e(E())}),(function(t){e(O()),e(E()),console.log(t.response.data.message)}))}},k=Object(l.b)((function(e){return{todos:e.todos,isLoading:e.loader.isLoading}}),(function(e){return{deleteTodo:function(t){return e(function(e){return function(t){var n=h(),a={id:e};g.a.post("/api/todo/delete",a,n).then((function(e){var n=e.data.id;t(R(n))}),(function(e){t(m("WARNING",e.response.data.message,2500))}))}}(t))},toggleTodo:function(t){return e(function(e){return function(t){var n=h(),a={id:e};g.a.post("/api/todo/toggle/checked",a,n).then((function(e){var n=e.data.id;t(w(n))}),(function(e){t(m("WARNING",e.response.data.message,2500))}))}}(t))},loadTodoList:function(){return e(C())}}}))(D),x=n.p+"img/list-ul-solid.svg",A=function(){var e=Object(l.c)();return r.a.createElement("div",{className:"header"},r.a.createElement("a",{className:"logo",href:"#"},r.a.createElement("img",{className:"logo-img",src:x}),r.a.createElement("h2",{className:"logo-text"},"Список дел")),r.a.createElement("button",{onClick:function(){e(O())},type:"button",className:"btn btn-outline-dark"},"Выйти"))},I=function(e){var t="",n="";switch(e.type){case"ERROR":t="Ошибка!",n="alert alert-danger alert-dismissible";break;case"SUCCESS":t="Успех!",n="alert alert-success alert-dismissible";break;case"WARNING":t="Внимание!",n="alert alert-warning alert-dismissible"}return r.a.createElement(L.a,{in:e.visible,timeout:{enter:150,exit:350},classNames:"alert",mountOnEnter:!0,unmountOnExit:!0},r.a.createElement("div",{className:n,role:"alert"},r.a.createElement("strong",null," ",t," ")," ",e.text,r.a.createElement("button",{type:"button",className:"close",onClick:function(){e.hideAlert()},"aria-label":"Close"},r.a.createElement("span",null,"×"))))},G=Object(l.b)((function(e){return{text:e.alert.text,type:e.alert.type,visible:e.alert.visible}}),(function(e){return{hideAlert:function(){return e(s())}}}))(I),U=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,null),r.a.createElement("div",{className:"container main"},r.a.createElement(G,null),r.a.createElement(y,null),r.a.createElement(k,null)))},H=function(e){var t=Object(a.useState)(""),n=t[0],o=t[1],c=Object(a.useState)(""),i=c[0],l=c[1];return r.a.createElement("div",{id:"formContent"},r.a.createElement("h2",null,"Авторизация"),r.a.createElement("form",null,r.a.createElement("input",{type:"email",placeholder:"Email",onChange:function(e){return o(e.target.value)},value:n}),r.a.createElement("input",{type:"password",placeholder:"Пароль",onChange:function(e){return l(e.target.value)},value:i}),r.a.createElement("input",{disabled:e.isLoading,type:"submit",className:"btn btn-primary",value:"Войти",onClick:function(t){return function(t){t.preventDefault(),e.loginUser(n,i),o(""),l("")}(t)}})),r.a.createElement("div",{id:"formFooter"},r.a.createElement("a",{className:"underlineHover",href:"/register"},"Создать аккаунт")))},P=Object(l.b)((function(e){return{isLoading:e.loader.isLoading}}),(function(e){return{loginUser:function(t,n){e(v(t,n))}}}))(H),W=function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"auth-page wrapper"},r.a.createElement(G,null),r.a.createElement(P,null)))},J=function(e){var t=Object(a.useState)(""),n=t[0],o=t[1],c=Object(a.useState)(""),l=c[0],u=c[1],s=Object(a.useState)(""),d=s[0],m=s[1];return r.a.createElement("div",{id:"formContent"},r.a.createElement("h2",null,"Регистрация"),r.a.createElement("form",null,r.a.createElement("input",{type:"email",placeholder:"Email",value:n,onChange:function(e){return o(e.target.value)}}),r.a.createElement("input",{type:"password",placeholder:"Пароль",value:l,onChange:function(e){return u(e.target.value)}}),r.a.createElement("input",{type:"password",placeholder:"Повторите пароль",value:d,onChange:function(e){return m(e.target.value)}}),r.a.createElement("input",{disabled:e.btnActive,type:"submit",className:"btn btn-primary",value:"Регистрация",onClick:function(t){return function(t){t.preventDefault(),d===l?e.registerUser(n,l):e.showAlert("WARNING","Пароли не совпадают"),o(""),u(""),m("")}(t)}})),r.a.createElement("div",{id:"formFooter"},r.a.createElement("a",{className:"underlineHover",href:"/login"},"Уже есть аккаунт?")),e.isRegister&&r.a.createElement(i.a,{to:"/login"}))},M=function(e,t){return function(n){n(b()),g.a.post("/api/auth/register",{email:e,password:t}).then((function(e){n(f("SUCCESS",e.data.message+". Идёт переадесация...")),setTimeout((function(){n(s()),n({type:"REGISTER"}),n(E())}),2500)}),(function(e){n(E()),n(m("ERROR",e.response.data.message,2500))}))}},F=Object(l.b)((function(e){return{btnActive:e.loader.isLoading,isRegister:e.register.isRegister}}),(function(e){return{registerUser:function(t,n){e(M(t,n))},showAlert:function(t,n){e(m(t,n,2500))}}}))(J),X=function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"wrapper register-page"},r.a.createElement(G,null),r.a.createElement(F,null)))},q=function(){var e=Object(l.c)(),t=Object(l.d)((function(e){return e.auth.isAuth}));return Object(a.useEffect)((function(){JSON.parse(localStorage.getItem("userData"))&&e({type:"LOGIN"})}),[]),t},z=function(){var e=function(e){return e?r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/",component:U}),r.a.createElement(i.a,{to:"/"})):r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/login",component:W}),r.a.createElement(i.b,{exact:!0,path:"/register",component:X}),r.a.createElement(i.a,{to:"/login"}))}(q());return r.a.createElement(c.a,null,e)},B=n(14),V=(n(123),n(125),function(e,t){switch(void 0===e&&(e=[]),t.type){case"LOAD_TODO_LIST":return[].concat(t.payload.todoList);case"ADD_TODO":return[].concat(e,[{_id:t.id,checked:!1,text:t.payload.text,date:t.payload.timeCreate}]);case"DELETE_TODO":return e.filter((function(e){return e._id!==t.payload.id}));case"TOGGLE_TODO":return e.map((function(e){return e._id===t.payload.id?Object.assign(Object.assign({},e),{},{checked:!e.checked}):e}));default:return e}}),K={type:"SUCCESS",text:"",visible:!1},Q=function(e,t){switch(void 0===e&&(e=K),t.type){case"SHOW_ALERT":return Object.assign(Object.assign({},e),{},{type:t.payload.type,text:t.payload.text,visible:!0});case"HIDE_ALERT":return Object.assign(Object.assign({},e),{},{visible:!1});default:return e}},Y={isRegister:!1},Z=function(e,t){switch(void 0===e&&(e=Y),t.type){case"REGISTER":return Object.assign(Object.assign({},e),{},{isRegister:!0});default:return e}},$={isLoading:!1},ee=function(e,t){switch(void 0===e&&(e=$),t.type){case"HIDE_LOADER":return Object.assign(Object.assign({},e),{},{isLoading:!1});case"SHOW_LOADER":return Object.assign(Object.assign({},e),{},{isLoading:!0});default:return e}},te={isAuth:!1},ne=function(e,t){switch(void 0===e&&(e=te),t.type){case"LOGIN":return Object.assign(Object.assign({},e),{},{isAuth:!0});case"LOGOUT":return Object.assign(Object.assign({},e),{},{isAuth:!1});default:return e}},ae=Object(B.c)({todos:V,alert:Q,register:Z,loader:ee,auth:ne}),re=n(73),oe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||B.d,ce=Object(B.e)(ae,oe(Object(B.a)(re.a))),ie=r.a.createElement(l.a,{store:ce},r.a.createElement(z,null));Object(o.render)(ie,document.querySelector("#app"))},76:function(e,t,n){e.exports=n(126)},81:function(e,t,n){}});